<!DOCTYPE html>
<html lang="mt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il-Quran Imqaddes bil-Malti â€“ Maltese Quran</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            color: #333333;
        }

        /* Floating Header Styles */
        .header {
            background-color: #FFFFFF;
            padding: 10px 20px;
            border-bottom: 1px solid #E0E0E0;
            position: sticky;
            top: 0;
            z-index: 1000;
            text-align: center;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        .selectors {
            margin-top: 10px;
        }

        .selectors select {
            padding: 8px;
            margin: 0 5px;
            border: 1px solid #E0E0E0;
            border-radius: 4px;
        }

        /* Verse Container Styles */
        .verse-container {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .verse-text {
            display: inline;
        }

        .verse-number {
            font-size: 0.85rem;
            color: #888888;
            vertical-align: super;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <div class="header">
        <h1>Il-Quran Imqaddes bil-Malti</h1>
        <div class="selectors">
            <select id="surahSelector">
                <option value="" disabled selected>Select Surah</option>
            </select>
            <select id="verseSelector" disabled>
                <option value="" disabled selected>Select Verse</option>
            </select>
        </div>
    </div>

    <!-- Verse Content -->
    <div id="verseContainer" class="verse-container"></div>

    <script>
        let quranData = {};
        let currentSurahIndex = 0;

        // Fetch Quran Data
        function loadData() {
            fetch('quran.json')
                .then(response => response.json())
                .then(data => {
                    quranData = data;
                    populateSurahSelector();
                    displaySurah(currentSurahIndex); // Display the first surah by default
                })
                .catch(err => {
                    console.error('Error loading Quran data:', err);
                    alert('Failed to load Quran data.');
                });
        }

        // Populate Surah Selector
        function populateSurahSelector() {
            const surahSelector = document.getElementById('surahSelector');
            const surahNames = Object.keys(quranData);

            surahNames.forEach((name, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = name;
                surahSelector.appendChild(option);
            });

            populateVerseSelector(0); // Initialize verse selector
        }

        // Populate Verse Selector
        function populateVerseSelector(surahIndex) {
            const verseSelector = document.getElementById('verseSelector');
            verseSelector.innerHTML = '<option value="" disabled selected>Select Verse</option>';
            const surah = quranData[Object.keys(quranData)[surahIndex]];

            Object.keys(surah).forEach(verseNumber => {
                const option = document.createElement('option');
                option.value = verseNumber;
                option.textContent = `Verse ${verseNumber}`;
                verseSelector.appendChild(option);
            });

            verseSelector.disabled = false;
        }

        // Display Surah Content
        function displaySurah(surahIndex) {
            const verseContainer = document.getElementById('verseContainer');
            verseContainer.innerHTML = ''; // Clear previous content

            const surahName = Object.keys(quranData)[surahIndex];
            const surah = quranData[surahName];

            Object.entries(surah).forEach(([verseNumber, verseContent]) => {
                const verseSpan = document.createElement('span');
                verseSpan.className = 'verse-text';
                verseSpan.id = `verse-${verseNumber}`;
                verseSpan.innerHTML = `${verseContent.maltese} <span class="verse-number">${verseNumber}</span> `;
                verseContainer.appendChild(verseSpan);
            });
        }

        // Event Listeners
        document.getElementById('surahSelector').addEventListener('change', (e) => {
            currentSurahIndex = parseInt(e.target.value);
            populateVerseSelector(currentSurahIndex);
            displaySurah(currentSurahIndex);
        });

        document.getElementById('verseSelector').addEventListener('change', (e) => {
            const verseId = `verse-${e.target.value}`;
            const verseElement = document.getElementById(verseId);
            if (verseElement) {
                verseElement.scrollIntoView({ behavior: 'smooth' });
            }
        });

        // Load data when the page is ready
        loadData();
    </script>
</body>
</html>
