<!DOCTYPE html>
<html lang="mt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Malti Quran - Quran translated into Maltese, providing verse-by-verse translation with easy navigation.">
    <meta name="keywords" content="Quran, Malti Quran, Quran translation, Quran in Maltese, Islamic, Quran study">
    <meta name="author" content="Il-Quran bil-Malti">
    <meta property="og:title" content="Malti Quran">
    <meta property="og:description" content="Explore the Quran in Maltese, with easy navigation and verse translations.">
    <meta property="og:image" content="path_to_image.jpg">
    <meta property="og:url" content="https://maltiquran.com">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Malti Quran">
    <meta name="twitter:description" content="Explore the Quran in Maltese, with easy navigation and verse translations.">
    <meta name="twitter:image" content="path_to_image.jpg">
    <meta name="theme-color" content="#ffffff">
    <title>Malti Quran</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <style>
        /* Your existing CSS */
    </style>
</head>
<body>
    <nav class="header">
        <div class="site-title">Malti Quran</div>
        <div class="verse-selector">
            <select id="surahSelector" aria-label="Select Surah">
                <option value="" disabled selected>Select Surah</option>
            </select>
            <select id="verseSelector" aria-label="Select Verse" disabled>
                <option value="" disabled selected>Select Verse</option>
            </select>
        </div>
    </nav>

    <!-- Default content for Surah Al-Fatiha -->
    <main class="content" id="verseContainer">
        <div class="surah-name">Al-Fatiha</div>
        <div class="verse-text" id="verse-1">
            Bismillahi r-Rahmani r-Rahim
            <sup class="verse-number">1</sup>
        </div>
        <div class="verse-text" id="verse-2">
            Alhamdu lillahi rabbil 'alamin
            <sup class="verse-number">2</sup>
        </div>
        <div class="verse-text" id="verse-3">
            Ar-Rahmani r-Rahim
            <sup class="verse-number">3</sup>
        </div>
        <div class="verse-text" id="verse-4">
            Maliki yawmid-din
            <sup class="verse-number">4</sup>
        </div>
        <div class="verse-text" id="verse-5">
            Iyyaka na'budu wa iyyaka nasta'in
            <sup class="verse-number">5</sup>
        </div>
        <div class="verse-text" id="verse-6">
            Ihdinas siratal mustaqim
            <sup class="verse-number">6</sup>
        </div>
        <div class="verse-text" id="verse-7">
            Siratal ladheena an'amta 'alayhim ghayril maghdubi 'alayhim wa lad-dallin
            <sup class="verse-number">7</sup>
        </div>
    </main>

    <footer class="footer">
        <p>Â© 2024 Il-Quran bil-Malti</p>
    </footer>

    <script>
        const surahSelector = document.getElementById('surahSelector');
        const verseSelector = document.getElementById('verseSelector');
        const verseContainer = document.getElementById('verseContainer');
        let quranData = {};

        async function loadData() {
            try {
                const response = await fetch('./quran.json');
                if (!response.ok) throw new Error('Failed to fetch Quran data.');
                const data = await response.json();
                quranData = data;
                initializeSurahSelector();
                displaySurah(Object.keys(data)[0]);
            } catch (error) {
                verseContainer.innerHTML = `<div class="error">Error: ${error.message}</div>`;
                console.error(error);
            }
        }

        function initializeSurahSelector() {
            surahSelector.innerHTML = '<option value="" disabled>Select Surah</option>';
            Object.keys(quranData).forEach((surahName) => {
                const option = document.createElement('option');
                option.value = surahName;
                option.textContent = surahName;
                surahSelector.appendChild(option);
            });
            surahSelector.disabled = false;
        }

        function displaySurah(surahName) {
            const surah = quranData[surahName];
            if (!surah) return;

            const content = `
                <div class="surah-name">${surahName}</div>
                ${Object.entries(surah).map(([verseNumber, verse]) => `
                    <div class="verse-text" id="verse-${verseNumber}">
                        ${verse.Translation || "Translation missing"}
                        <sup class="verse-number">${verseNumber}</sup>
                    </div>
                `).join('')}
            `;
            
            verseContainer.innerHTML = content;

            verseSelector.innerHTML = `<option value="" disabled selected>Select Verse</option>`;
            Object.keys(surah).forEach((verseNumber) => {
                const option = document.createElement('option');
                option.value = verseNumber;
                option.textContent = `Verse ${verseNumber}`;
                verseSelector.appendChild(option);
            });
            verseSelector.disabled = false;
        }

        verseSelector.addEventListener('change', () => {
            const verseNumber = verseSelector.value;
            const selectedVerse = document.getElementById(`verse-${verseNumber}`);
            if (selectedVerse) {
                selectedVerse.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });

        loadData();

        surahSelector.addEventListener('change', () => {
            const surahName = surahSelector.value;
            displaySurah(surahName);
        });
    </script>
</body>
</html>
